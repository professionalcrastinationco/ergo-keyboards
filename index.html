<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZMK Keyboard Layout Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>ZMK Keyboard Layout</h1>

        <div class="layer-tabs">
            <button class="layer-tab active" data-layer="base">Base</button>
            <button class="layer-tab" data-layer="navnum">NavNum</button>
            <button class="layer-tab" data-layer="symbols">Symbols</button>
            <button class="layer-tab" data-layer="system">System</button>
        </div>

        <div class="zoom-controls">
            <button class="zoom-btn" id="zoom-out" title="Zoom Out (-)">-</button>
            <input type="range" class="zoom-slider" id="zoom-slider" min="50" max="200" value="100">
            <button class="zoom-btn" id="zoom-in" title="Zoom In (+)">+</button>
            <span class="zoom-level" id="zoom-level">100%</span>
            <button class="zoom-btn zoom-reset" id="zoom-reset" title="Reset Zoom (0)">Reset</button>
            <span class="zoom-hint">Ctrl+Scroll or +/-</span>
        </div>

        <div class="keyboard-wrapper" id="keyboard-wrapper">
            <div class="keyboard-container" id="keyboard-container">
                <div class="half left-half" id="left-half"></div>
                <div class="half right-half" id="right-half"></div>
            </div>
        </div>

        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>Key Editor <span class="save-indicator" id="save-indicator">Default</span></h2>
                <span class="selected-position" id="selected-position">No key selected</span>
            </div>
            <div class="sidebar-content" id="sidebar-content">
                <div class="no-selection" id="no-selection">
                    <p>Click a key to edit</p>
                </div>
                <div class="key-fields" id="key-fields" style="display: none;">
                    <div class="field-group">
                        <label for="field-primary">Primary Label</label>
                        <input type="text" id="field-primary" placeholder="e.g., A, Tab, Enter">
                    </div>
                    <div class="field-group">
                        <label for="field-secondary">Secondary Label</label>
                        <input type="text" id="field-secondary" placeholder="e.g., shift symbol">
                    </div>
                    <div class="field-group">
                        <label for="field-hold">Hold Modifier</label>
                        <input type="text" id="field-hold" placeholder="e.g., Shift, Ctrl, L1">
                    </div>
                    <div class="field-group checkbox-group">
                        <label>
                            <input type="checkbox" id="field-accent">
                            Accent (red background)
                        </label>
                    </div>
                    <div class="field-group checkbox-group">
                        <label>
                            <input type="checkbox" id="field-highlight">
                            Highlight (red border)
                        </label>
                    </div>
                    <div class="field-section">
                        <h3 class="section-title">Combo Properties</h3>
                        <div class="field-group">
                            <label for="field-tap">Tap Label</label>
                            <input type="text" id="field-tap" placeholder="Layer-tap tap behavior">
                        </div>
                        <div class="field-group">
                            <label for="field-modifier-key">Modifier Combo</label>
                            <input type="text" id="field-modifier-key" placeholder="e.g., Ctrl+C">
                        </div>
                        <div class="field-group">
                            <label for="field-chord-keys">Chord Keys</label>
                            <input type="text" id="field-chord-keys" placeholder="e.g., A+B">
                        </div>
                        <div class="field-group">
                            <label for="field-chord-output">Chord Output</label>
                            <input type="text" id="field-chord-output" placeholder="e.g., C">
                        </div>
                    </div>
                    <div class="sidebar-actions">
                        <button id="btn-clear-key" class="sidebar-btn">Clear Key</button>
                        <button id="btn-reset-key" class="sidebar-btn secondary">Reset Key</button>
                        <button id="btn-undo" class="sidebar-btn" disabled>Undo</button>
                    </div>
                    <div class="field-section">
                        <h3 class="section-title">File Operations</h3>
                        <div class="file-actions">
                            <button id="btn-export" class="sidebar-btn primary">Export JSON</button>
                            <button id="btn-import" class="sidebar-btn">Import JSON</button>
                            <input type="file" id="file-import" accept=".json" style="display: none;">
                            <button id="btn-reset-all" class="sidebar-btn danger">Reset to Default</button>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color normal"></div>
                <span>Normal Key</span>
            </div>
            <div class="legend-item">
                <div class="legend-color hold"></div>
                <span>Hold Function</span>
            </div>
            <div class="legend-item">
                <div class="legend-color accent"></div>
                <span>Special Key</span>
            </div>
        </div>

        <div class="layer-info" id="layer-info">
            <h3>Base Layer</h3>
            <p>Primary typing layer with QWERTY layout. Hold keys show modifier and layer access functions.</p>
        </div>

        <footer>Created with Interactive Keyboard Layout Editor</footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
